<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>MVC DOH Toolbar Widget Test</title>
	<style>
		@import "../../../../dijit/themes/claro/document.css";
		@import "../../../../dijit/tests/css/dijitTests.css";

		.flatScreen {
			background-image: url(../../../../dijit/tests/images/flatScreen.gif); height: 32px; width: 32px;		
	</style>
	<link id="themeStyles" rel="stylesheet" href="../../../../dijit/themes/claro/claro.css"/>
<script type="text/javascript" djConfig="parseOnLoad:0,isDebug:1,async:1" src="../../../../dojo/dojo.js"></script>

	<script type="text/javascript">
		require([
			"dojox/mvc",
			"dojo/parser",
			"dojox/mvc/_patches",
			"dojox/mvc/at",
			"dijit/Declaration",
			"dijit/Toolbar",
			"dijit/ToolbarSeparator",
			"dijit/form/Button",
			"dijit/form/DropDownButton",
			"dijit/form/ComboButton",
			"dijit/form/ToggleButton",
			"dijit/ColorPalette",
			"dijit/TooltipDialog",
			"dijit/form/TextBox",
			"dijit/Menu",
			"dijit/MenuItem",
			"dijit/form/TextBox",
			"dijit/form/Select",
			"dijit/form/CheckBox"
		], function(mvc, parser){
			(cutItemModel = new dojo.Stateful).set("iconClass", "dijitEditorIcon dijitEditorIconCut");
			(copyItemModel = new dojo.Stateful).set("iconClass", "dijitEditorIcon dijitEditorIconCopy").set("label", "Copy");
			boldItemModel = mvc.newStatefulModel({ data : { "checked" : false}});
				require([
					'doh/runner', 'dijit/dijit'
				], function(){
				require([
					'dojo/domReady!'
					], function(){
						doh.register("parse", function() {
							dojo.parser.parse();
						});
						// should be able to verify all of the inputs 
						doh.register("check initial values and bindings", [{
							name : "initial",
							runTest : function() {
								doh.is("Copy", dijit.byId("dijit_form_Select_2").get('value'),"value should be Copy");
								doh.is("Copy",  dijit.byId("toolbar1.copy").get('label'),"label should be Copy");

								doh.t(dijit.byId("dijit_form_CheckBox_0").get('checked'),"bold checkbox should be true");
								doh.t(dijit.byId("toolbar1.bold").get('checked'),"bold checkbox should be true");
								
								doh.f(dijit.byId("dijit_form_CheckBox_1").get('checked'),"bold checkbox should be false");
								doh.f(dijit.byId("toolbar1.italic").get('checked'),"bold checkbox should be false");
							}
						}]);

						doh.register("update Copy Label", [{
							name : "Update-First-Name",
							runTest : function() {
								var copyLabel, bold, italic;
								//test first relevant false
								copyLabel = dijit.byId("dijit_form_Select_2");
								copyLabel.set("value","Copy to clipboard...");
								if (copyLabel) {
									doh.is("Copy to clipboard...", dijit.byId("dijit_form_Select_2").get('value'),"value should be Copy to clipboard...");
									doh.is("Copy to clipboard...",  dijit.byId("toolbar1.copy").get('label'),"label should be Copy to clipboard...");
								}
								bold = dijit.byId("dijit_form_CheckBox_0");
								bold.set("checked",false);
								if (bold) {
									doh.f(dijit.byId("dijit_form_CheckBox_0").get('checked'),"bold checkbox should be false");
									doh.f(dijit.byId("toolbar1.bold").get('checked'),"bold toolbar should be false");
								}
								italic = dijit.byId("dijit_form_CheckBox_1");
								italic.set("checked",true);
								if (bold) {
									doh.t(dijit.byId("dijit_form_CheckBox_1").get('checked'),"bold checkbox should be true");
									doh.t(dijit.byId("toolbar1.italic").get('checked'),"bold checkbox should be true");
								}


							}
						}]);
						doh.run();

					});
				});	
		}); 
		</script>
</head>


	<body class="claro">
	<h1 class="testTitle">Toolbar test</h1>

	<span data-dojo-type="dijit.Declaration" data-dojo-props='widgetClass:"ToolbarSectionStart", defaults:{ label: "Label"}'>
		<span data-dojo-type="dijit.ToolbarSeparator"></span><i>${label}:</i>
	</span>

	<h2>Toolbar from markup</h2>

	<div id="toolbar1" data-dojo-type="dijit.Toolbar"
			><div data-dojo-type="ToolbarSectionStart" data-dojo-props='label:"Buttons"'></div
			><div id="toolbar1.cut" data-dojo-type="dijit.form.Button" data-dojo-props='iconClass:"dijitEditorIcon dijitEditorIconCut", showLabel:false, ref: {iconClass: dojox.mvc.at(cutItemModel, "iconClass")}'>Cut</div
			><div id="toolbar1.copy" data-dojo-type="dijit.form.Button" data-dojo-props='iconClass:"dijitEditorIcon dijitEditorIconCopy", showLabel:true, ref: {iconClass: dojox.mvc.at(copyItemModel, "iconClass"), label: dojox.mvc.at(copyItemModel, "label")}'>Copy</div

			><div data-dojo-type="ToolbarSectionStart" data-dojo-props='label:"Toggles"'></div
			><div id="toolbar1.bold" data-dojo-type="dijit.form.ToggleButton" data-dojo-props='iconClass:"dijitEditorIcon dijitEditorIconBold", showLabel:false, ref: {checked: dojox.mvc.at(boldItemModel, "checked")}'>Bold</div
			><div id="toolbar1.italic" data-dojo-type="dijit.form.ToggleButton" data-dojo-props='iconClass:"dijitEditorIcon dijitEditorIconItalic", showLabel: true'>Italic</div

></div>

	<div style="margin-top:8px;">
		Icon for "Cut":
		<select data-dojo-type="dijit.form.Select" data-dojo-props="ref: {value: dojox.mvc.at(cutItemModel, 'iconClass')}">
			<option value="dijitEditorIcon dijitEditorIconCut">Cut</option>
			<option value="dijitFolderClosed">Folder</option>
			<option value="noteIcon">Note</option>
			<option value="flatScreen">Flat Screen</option>
		</select>
	</div>

	<div style="margin-top:8px;">
		Icon for "Copy":
		<select data-dojo-type="dijit.form.Select" data-dojo-props="ref: {value: dojox.mvc.at(copyItemModel, 'iconClass')}">
			<option value="dijitEditorIcon dijitEditorIconCopy">Copy</option>
			<option value="dijitFolderClosed">Folder</option>
			<option value="noteIcon">Note</option>
			<option value="flatScreen">Flat Screen</option>
		</select>
	</div>

	<div style="margin-top:8px;">
		Label for "Copy":
		<select data-dojo-type="dijit.form.Select" data-dojo-props="ref: {value: dojox.mvc.at(copyItemModel, 'label')}">
			<option value="Copy">Copy</option>
			<option value="Copy to clipboard...">Copy to clipboard...</option>
		</select>
	</div>

	<div style="margin-top:8px;">
		State for "Bold":
		<input data-dojo-type="dijit.form.CheckBox" checked data-dojo-props="ref: {checked: dojox.mvc.at(boldItemModel, 'checked')}">
	</div>

	<div style="margin-top:8px;">
		State for "Italic" (directly bound to the tool bar item widget):
		<input data-dojo-type="dijit.form.CheckBox" checked data-dojo-props="ref: {checked: dojox.mvc.at(dijit.byId('toolbar1.italic'), 'checked')}">
	</div>
  </body>

</html>
